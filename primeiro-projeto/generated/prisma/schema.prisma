generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  schemas  = ["app", "utils"]
}

model comment {
  id                  Int       @id(map: "pk_s_app_t_comment") @default(autoincrement())
  created_at          DateTime  @default(now()) @db.Timestamptz(6)
  updated_at          DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at          DateTime? @db.Timestamptz(6)
  is_deleted          Boolean   @default(false)
  body                String    @db.VarChar(2000)
  likes               Int       @default(0)
  dislikes            Int       @default(0)
  s_app_t_post_c_post Int
  s_app_t_user_c_user String    @db.Uuid
  post                post      @relation(fields: [s_app_t_post_c_post], references: [id], onUpdate: Restrict, map: "fk_s_app_t_comment_c_post")
  user                user      @relation(fields: [s_app_t_user_c_user], references: [id], onUpdate: Restrict, map: "fk_s_app_t_comment_c_user")

  @@schema("app")
}

model post {
  id                  Int       @id(map: "pk_s_app_t_post") @default(autoincrement())
  created_at          DateTime  @default(now()) @db.Timestamptz(6)
  updated_at          DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at          DateTime? @db.Timestamptz(6)
  is_deleted          Boolean   @default(false)
  title               String    @db.VarChar(100)
  body                String    @db.VarChar(5000)
  likes               Int       @default(0)
  dislikes            Int       @default(0)
  s_app_t_user_c_user String    @db.Uuid
  comment             comment[]
  user                user      @relation(fields: [s_app_t_user_c_user], references: [id], onUpdate: Restrict, map: "fk_s_app_t_post_c_user")

  @@schema("app")
}

model user {
  id          String    @id(map: "pk_s_app_t_user") @default(dbgenerated("uuidv7()")) @db.Uuid
  created_at  DateTime  @default(now()) @db.Timestamptz(6)
  updated_at  DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at  DateTime? @db.Timestamptz(6)
  disabled_at DateTime? @db.Timestamptz(6)
  is_deleted  Boolean   @default(false)
  is_disabled Boolean   @default(false)
  name        String    @db.VarChar(150)
  birthdate   DateTime  @db.Timestamptz(6)
  sex         String    @db.VarChar(1)
  email       String    @db.VarChar(79)
  phone       String    @db.VarChar(11)
  password    String    @db.VarChar(128)
  comment     comment[]
  post        post[]

  @@schema("app")
}
